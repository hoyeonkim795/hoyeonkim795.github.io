<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="[Network] 대챙키와 공개키 SSL 동작방식" /><meta name="author" content="hoyeonkim" /><meta property="og:locale" content="en_US" /><meta name="description" content="대칭키와 공개키" /><meta property="og:description" content="대칭키와 공개키" /><link rel="canonical" href="https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/" /><meta property="og:url" content="https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/" /><meta property="og:site_name" content="Hoyeon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-13T22:03:30+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Network] 대챙키와 공개키 SSL 동작방식" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@hoyeonkim" /><meta name="google-site-verification" content="google1cf08ff3ecb07dba.html" /> <script type="application/ld+json"> {"headline":"[Network] 대챙키와 공개키 SSL 동작방식","dateModified":"2021-04-03T01:09:37+09:00","datePublished":"2021-03-13T22:03:30+09:00","description":"대칭키와 공개키","mainEntityOfPage":{"@type":"WebPage","@id":"https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/"},"url":"https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/","@type":"BlogPosting","author":{"@type":"Person","name":"hoyeonkim"},"@context":"https://schema.org"}</script><title>[Network] 대챙키와 공개키 SSL 동작방식 | Hoyeon</title><meta property="og:image" content="https://hoyeonkim795.github.io/assets/img/hamster.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><meta content = '3119c12aa5337b96f24bb6e1a1d06415' name = 'naver-site-verification'><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-REVMVHFLJX"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-REVMVHFLJX'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" style = "font-family: Jua;"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar/me.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hoyeon</a></div><div class="site-subtitle">햄찌 어멈 개발자</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hoyeonkim795" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hy940313','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Network] 대챙키와 공개키 SSL 동작방식</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Network] 대챙키와 공개키 SSL 동작방식</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Mar 13, 2021, 10:03 PM +0900" > Mar 13, 2021 <i class="unloaded">2021-03-13T22:03:30+09:00</i> </span> by <span class="author"> hoyeonkim </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Apr 3, 2021, 1:09 AM +0900" > Apr 3, 2021 <i class="unloaded">2021-04-03T01:09:37+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2430 words">13 min</span></div></div><div class="post-content"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4665417785081320" data-ad-slot="2909804994" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> window.onload = function() {(adsbygoogle = window.adsbygoogle || []).push({})}; </script><h1 id="대칭키와-공개키">대칭키와 공개키</h1><p>암호화 알고리즘의 종류인 대칭키와 공개키에 대해 알아보고 SSL 동작방식에 대해 알아보겠습니다. 😎</p><h1 id="대칭키symmetric-key"><strong>대칭키(Symmetric Key)</strong></h1><blockquote><p>암호화와 복호화에 같은 암호키(대칭키)를 사용하는 알고리즘</p></blockquote><h2 id="대칭키의-장점과-단점">대칭키의 장점과 단점</h2><h3 id="장점">장점</h3><ul><li>키 크기가 상대적으로 작고 암호 알고리즘 내부 구조가 단순하여, 시스템 개발 환경에 용이하고, 비대칭키(공개키) 에 비해 암호화와 복호화 속도가 빠르다.</ul><h3 id="단점">단점</h3><ul><li>하지만 교환 당사자간에 동일한 키를 공유해야 하기 때문에 키 관리의 어려움이 있고, 잦은 키 변경이 있는 경우 불편하다.<li>디지털 서명 기법에 적용이 곤란하고 안전성을 분석하기 어렵고 중재자가 필요하다.</ul><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1"># 먼저 cryptography에서 대칭키 암호화를 할 수 있는 Fernet을 import 합니다.
</span><span class="kn">from</span> <span class="nn">cryptography.fernet</span> <span class="kn">import</span> <span class="n">Fernet</span>

<span class="c1"># Fernet.generate_key()를 통해 키를 하나 생성합니다. 
# 대칭키 생성
</span><span class="n">key</span> <span class="o">=</span> <span class="n">Fernet</span><span class="p">.</span><span class="n">generate_key</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="s">'대칭키: '</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<span class="c1"># 암호화 과정
</span><span class="n">fernet</span> <span class="o">=</span> <span class="n">Fernet</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="n">encrypt_str</span> <span class="o">=</span> <span class="n">fernet</span><span class="p">.</span><span class="n">encrypt</span><span class="p">(</span><span class="sa">b</span><span class="s">"I want to eat"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"암호화된 문자열:"</span><span class="p">,</span> <span class="n">encrypt_str</span><span class="p">)</span>

<span class="c1"># 복호화 과정
</span><span class="n">decrypt_str</span> <span class="o">=</span> <span class="n">fernet</span><span class="p">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">encrypt_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'복호화된 문자열:'</span><span class="p">,</span> <span class="n">decrypt_str</span><span class="p">)</span>

<span class="c1">### 출력 ####
# 대칭키:  b'fZTFBgJmhA0POw0gI7A4aeXOyVl_zwf2SvqqVi1JOXg='
# 암호화된 문자열: b'gAAAAABgTw78gay90IYHUR23bKNLddfYmBbKFlL_Mld1zoBAKkkM2PQCx3mqWHNCN3MNZXdb_l3UAj7AAqh0W3EPOdaHYItJSQ=='
# 복호화된 문자열: b'I want to eat'
</span></pre></table></code></div></div><h1 id="공개키public-key"><strong>공개키(Public Key)</strong></h1><blockquote><p>암호화와 복호화에 사용하는 암호키를 분리한 알고리즘</p></blockquote><p>자신이 가지고 있는 고유한 암호키(비밀키)로만 복호화할 수 있는 암호키(공개키)를 대중에 공개함</p><p>즉, 공개키는 네트워크에 공유하고 개인키는 본인만 보유</p><h2 id="공개키-암호화-방식-진행-과정"><strong>공개키 암호화 방식 진행 과정</strong></h2><ol><li>A가 웹 상에 공개된 ‘B의 공개키’를 이용해 평문을 암호화하여 B에게 보냄<li>B는 자신의 비밀키로 복호화한 평문을 확인, A의 공개키로 응답을 암호화하여 A에개 보냄<li>A는 자신의 비밀키로 암호화된 응답문을 복호화함</ol><p>대칭키의 단점을 완벽하게 해결했지만, 암호화 복호화가 매우 복잡함</p><p>(암호화하는 키가 복호화하는 키가 서로 다르기 때문)</p><p>정리하자면, 암호화는 공개키를 사용하고 복호화 시에는 개인키를 사용한다.</p><h2 id="공개키의-장점과-단점">공개키의 장점과 단점</h2><h3 id="장점-1">장점</h3><ul><li>근원지 증명이 가능하다.<li>키의 관리와 분배가 용이하다.<ul><li>키의 관리 측면 : 사용자를 n이라 했을 때, 키의 개수가 불과 2n개만 생성<li>키의 분배 측면 : 키 교환의 기밀성 보장, 키 공유가 필요 없음</ul></ul><h3 id="단점-1">단점</h3><ul><li>알고리즘 수행이 느림</ul><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">Crypto.PublicKey</span> <span class="kn">import</span> <span class="n">RSA</span>
<span class="kn">from</span> <span class="nn">Crypto</span> <span class="kn">import</span> <span class="n">Random</span>

<span class="c1"># 코드 진행 전 Crypto를 설치해주세요.
# pip install pycryptodome
</span>
<span class="c1"># 난수를 생성하여 RSA 키 객체를 만들어 key 변수에 할당합니다.
</span><span class="n">ransdom_generator</span> <span class="o">=</span> <span class="n">Random</span><span class="p">.</span><span class="n">new</span><span class="p">().</span><span class="n">read</span>
<span class="n">key</span> <span class="o">=</span> <span class="n">RSA</span><span class="p">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">random_generator</span><span class="p">)</span>

<span class="c1"># 공개키를 만들고 암호화 합니다. 
# encrypted는 튜플 객체를 반환하며 첫 번째 아이템에는 키 정보를, 두 번째 아이템은 항상 None을 반환합니다.
</span><span class="n">pub_key</span> <span class="o">=</span> <span class="n">key</span><span class="p">.</span><span class="n">publickkey</span><span class="p">()</span>
<span class="n">encrypted</span> <span class="o">=</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span> <span class="c1"># 공개키로 암호화를 한다.
</span><span class="n">encrypted_msg</span> <span class="o">=</span> <span class="n">encrypted</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># 암호화 결과를 출력합니다.
</span><span class="k">print</span><span class="p">(</span><span class="s">'==== encrypted message ====</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">encrypted_msg</span><span class="p">))</span>

<span class="c1"># 복호화를 진행합니다.
</span><span class="n">decrypted_msg</span> <span class="o">=</span> <span class="n">key</span><span class="p">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">encrypted_msg</span><span class="p">)</span> <span class="c1"># 비밀키로 복호화 한다.
</span>
<span class="c1"># 복호화 결과를 출력합니다.
</span><span class="k">print</span><span class="p">(</span><span class="s">'==== decrypted message ====</span><span class="se">\n</span><span class="s">{}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">decrypted_msg</span><span class="p">))</span>
</pre></table></code></div></div><h3 id="대칭키와-공개키-암호화-방식을-적절히-혼합해보면"><strong>대칭키와 공개키 암호화 방식을 적절히 혼합해보면?</strong></h3><blockquote><p>SSL 탄생의 시초가 됨</p></blockquote><p>먼저, SSL 에 대해서 잠깐 짚고 넘어가자.</p><p>SSL 은 웹서버와 브라우저 간의 통신을 암호화 해서 중간에 누가 가로채더라도 내용을 알 수 없게 해다. SSL이 적용되면 <strong>https://</strong> 를 사용하여 웹서버에 접근하게 됩니다.</p><p>대칭키 암호화는 서버와 클라이언트가 같은 키를 사용해야 하므로 키를 공유하는데 문제가 있고, 비대칭키 암호화는 공개키를 배포함으로써 키 공유 문제는 해결 되지만, 처리 속도가 느린 문제가 있다.</p><p>HTTPS 통신에서 실제 전송되는 데이터의 암호화에는 대칭키 암호화 방식을 사용하고, 키 교환에는 비대칭키 암호화를 사용하여 이러한 문제를 해결하고 있다.</p><h3 id="ca를-브라우저는-알고-있다"><strong>CA를 브라우저는 알고 있다</strong></h3><p>인증서를 이해하는데 꼭 알고 있어야 하는 것이 CA의 리스트다. 브라우저는 내부적으로 CA의 리스트를 미리 파악하고 있다. 이 말은 브라우저의 소스코드 안에 CA의 리스트가 들어있다는 것이다. 브라우저가 미리 파악하고 있는 CA의 리스트에 포함되어야만 공인된 CA가 될 수 있는 것이다. CA의 리스트와 함께 각 <a href="https://opentutorials.org/course/228/4894#public">CA의 공개키</a>를 브라우저는 이미 알고 있다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="\assets\img\public_key\Untitled.png" alt="Untitled" /></p><h2 id="ssl-동작-방식"><strong>SSL 동작 방식</strong></h2><p>1) 클라이언트가 서버에 접속한다. 이 단계를 Client Hello라고 한다.</p><p>2) 서버는 Client Hello에 대한 응답으로 Server Hello를 하게 된다.</p><p>3) 클라이언트는 서버의 인증서가 CA에 의해서 발급된 것인지를 확인하기 위해서 클라이언트에 내장된 CA 리스트를 확인한다. CA 리스트에 인증서가 없다면 사용자에게 경고 메시지를 출력한다. 인증서가 CA에 의해서 발급된 것인지를 확인하기 위해서 클라이언트에 내장된 CA의 공개키를 이용해서 인증서를 복호화한다. 복호화에 성공했다면 인증서는 CA의 개인키로 암호화된 문서임이 암시적으로 보증된 것이다. 인증서를 전송한 서버를 믿을 수 있게 된 것이다.</p><p>클라이언트는 상기 2번을 통해서 받은 서버의 랜덤 데이터와 클라이언트가 생성한 랜덤 데이터를 조합해서 pre master secret라는 키를 생성한다. 이 키는 뒤에서 살펴볼 세션 단계에서 데이터를 주고 받을 때 암호화하기 위해서 사용될 것이다. 그럼 문제는 이 pre master secret 값을 어떻게 서버에게 전달할 것인가이다. 이 때 사용하는 방법이 바로 공개키 방식이다.  그럼 서버의 공개키는 어떻게 구할 수 있을까? 서버로부터 받은 인증서 안에 들어있다. 이 서버의 공개키를 이용해서 pre master secret 값을 암호화한 후에 서버로 전송하면 안전하게 전송할 수 있다.</p><p>이 때 사용할 암호화 기법은 대칭키이기 때문에 pre master secret 값은 제 3자에게 절대로 노출되어서는 안된다.</p><p>서버의 공개키로 pre master secret 값을 암호화해서 서버로 전송하면 서버는 자신의 비공개키로 안전하게 복호화 할 수 있다.</p><p>4) 서버는 클라이언트가 전송한 pre master secret 값을 자신의 비공개키로 복호화한다. 이로서 서버와 클라이언트가 모두 pre master secret 값을 공유하게 되었다. 그리고 서버와 클라이언트는 모두 일련의 과정을 거쳐서 pre master secret 값을 master secret 값으로 만든다. master secret는 session key를 생성하는데 이 session key 값을 이용해서 서버와 클라이언트는 데이터를 대칭키 방식으로 암호화 한 후에 주고 받는다. 이렇게해서 세션키를 클라이언트와 서버가 모두 공유하게 되었다는 점을 기억하자.</p><p>5) 클라이언트와 서버는 핸드쉐이크 단계의 종료를 서로에게 알린다.</p><h3 id="그냥-공개키를-사용하면-될-것을-대칭키와-공개키를-조합해서-사용하는-이유는-무엇을까">그냥 공개키를 사용하면 될 것을 대칭키와 공개키를 조합해서 사용하는 이유는 무엇을까?</h3><p>그것은 공개키 방식이 많은 컴퓨터 파워를 사용하기 때문이다. 만약 공개키를 그대로 사용하면 많은 접속이 몰리는 서버는 매우 큰 비용을 지불해야 할 것이다. 반대로 대칭키는 암호를 푸는 열쇠인 대칭키를 상대에게 전송해야 하는데, 암호화가 되지 않은 인터넷을 통해서 키를 전송하는 것은 위험하기 때문이다. 그래서 속도는 느리지만 데이터를 안전하게 주고 받을 수 있는 공개키 방식으로 대칭키를 암호화하고, 실제 데이터를 주고 받을 때는 대칭키를 이용해서 데이터를 주고 받는 것이다.</p><p>참고 자료</p><p><a href="https://opentutorials.org/course/228/4894">https://opentutorials.org/course/228/4894</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/computer-science/'>Computer Science</a>, <a href='/categories/network/'>Network</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/symmetric-key/" class="post-tag no-text-decoration" >symmetric key</a> <a href="/tags/public-key/" class="post-tag no-text-decoration" >public key</a> <a href="/tags/ssl/" class="post-tag no-text-decoration" >ssl</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Network] 대챙키와 공개키 SSL 동작방식 - Hoyeon&url=https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Network] 대챙키와 공개키 SSL 동작방식 - Hoyeon&u=https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Network] 대챙키와 공개키 SSL 동작방식 - Hoyeon&url=https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4665417785081320" data-ad-slot="8545275050" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EB%B6%80%EB%8F%99%EC%82%B0-%EA%B1%B0%EB%9E%98%EB%9F%89/">[부동산] 서울아파트 거래량</a><li><a href="/posts/Programming-C++-%EC%83%81%EC%88%98-%EB%A9%A4%EB%B2%84-%ED%95%A8%EC%88%98%EC%99%80-this/">[Programming] C++ 상수 멤버 함수와 this</a><li><a href="/posts/C++%EA%B8%B0%EB%B3%B8%EB%AC%B8%EB%B2%95/">[Programming] 코테용 C++ 기본 문법 1</a><li><a href="/posts/golang/">[Golang] 문법 기억 더듬기</a><li><a href="/posts/Golang-goroutine-channel/">[Golang] goroutine channel</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/%ED%8C%8C%EC%9D%B4%EC%8D%AC/">파이썬</a> <a class="post-tag" href="/tags/%EC%82%BC%EC%84%B1%EC%97%AD%EB%9F%89%ED%85%8C%EC%8A%A4%ED%8A%B8/">삼성역량테스트</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%9B%90%EB%A6%AC-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">그림으로 배우는 구조와 원리 운영체제</a> <a class="post-tag" href="/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a> <a class="post-tag" href="/tags/c/">c++</a> <a class="post-tag" href="/tags/%EA%B3%B5%EB%A3%A1%EC%B1%85/">공룡책</a> <a class="post-tag" href="/tags/chapter-01-%EC%9B%B9-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EA%B0%80-%EB%A9%94%EC%8B%9C%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4/">chapter 01 웹 브라우저가 메시지를 만든다</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div><div class = 'ad'> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4665417785081320" data-ad-slot="3815051924" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/OSI7layer/"><div class="card-body"> <span class="timeago small" > Dec 1, 2020 <i class="unloaded">2020-12-01T14:03:13+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Network] OSI 7Layer</h3><div class="text-muted small"><p> OSI 7Layer란 ? 👀 네트워크 통신 과정을 7개의 계층으로 구분한 산업 표준 참조 모델이다. 초창기의 네트워크는 각 컴퓨터마다 시스템이 달랐기 때문에 하드웨어와 소프트웨어의 논리적인 변경없이 통신할 수 있는 표준 모델이 나타나게 되었다. 1계층 : 물리계층 (Physical Layer) 하드웨어 물리계층은 OSI 모델의 최하위 계...</p></div></div></a></div><div class="card"> <a href="/posts/TCP%EC%99%80UDP/"><div class="card-body"> <span class="timeago small" > Dec 2, 2020 <i class="unloaded">2020-12-02T16:12:13+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Network] TCP VS UDP</h3><div class="text-muted small"><p> 전송계층 → TCP와 UDP는 TCP/IP의 전송계층 에서 사용되는 프로토콜이다. 전송계층은 IP에 의해 전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당하는 계층이다. TCP VS UDP TCP는 Transmission Control Protocol 의 약자이고, UDP는 User Datagram Protocol의 약자이다. 두 프...</p></div></div></a></div><div class="card"> <a href="/posts/HTTP-vs-HTTPS/"><div class="card-body"> <span class="timeago small" > Dec 3, 2020 <i class="unloaded">2020-12-03T22:10:13+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Network] HTTP와 HTTPS 개념 및 차이</h3><div class="text-muted small"><p> HTTP 란? HTTP는 HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜이다. 프로토콜은 데이터를 주고받는 상호간에 미리 약속된 규칙으로 규약 송신자와 수신자 사이에 “데이터 구조는 이런 식을 하고, 이런 의미이고, 속도는 어느정도로 보내고” 등을 약속한 것이다. 결국 HTTP는 클라이언트와 서버 간에 요청/응답 으로 데...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/SQL-%EB%AC%B8%EC%A0%9C-%EB%AA%A8%EB%93%A0-%EC%BD%94%EB%93%9C/" class="btn btn-outline-primary"><p>[프로그래머스] SQL 문제 모든 코드</p></a> <a href="/posts/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%95%A9%EC%8A%B9-%ED%83%9D%EC%8B%9C-%EC%9A%94%EA%B8%88/" class="btn btn-outline-primary"><p>[프로그래머스] 합승 택시 요금</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//hoyeonkim795-github-io-1.disqus.com/embed.js', disqusConfig: function() { this.page.title = '[Network] 대챙키와 공개키 SSL 동작방식'; this.page.url = 'https://hoyeonkim795.github.io/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/'; this.page.identifier = '/posts/%EB%8C%80%EC%B9%AD%ED%82%A4-%EA%B3%B5%EA%B0%9C%ED%82%A4/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">hoyeon</a>.</p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/%ED%8C%8C%EC%9D%B4%EC%8D%AC/">파이썬</a> <a class="post-tag" href="/tags/%EC%82%BC%EC%84%B1%EC%97%AD%EB%9F%89%ED%85%8C%EC%8A%A4%ED%8A%B8/">삼성역량테스트</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%9B%90%EB%A6%AC-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">그림으로 배우는 구조와 원리 운영체제</a> <a class="post-tag" href="/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a> <a class="post-tag" href="/tags/c/">c++</a> <a class="post-tag" href="/tags/%EA%B3%B5%EB%A3%A1%EC%B1%85/">공룡책</a> <a class="post-tag" href="/tags/chapter-01-%EC%9B%B9-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EA%B0%80-%EB%A9%94%EC%8B%9C%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4/">chapter 01 웹 브라우저가 메시지를 만든다</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hoyeonkim795.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
